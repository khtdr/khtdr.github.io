<!DOCTYPE html>
<html lang="en">
	
<head>
	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">

	
	<title>KHTDR</title>

	
	


	
	<link rel="stylesheet" href="/css/styles.css" />


	
	


	
	</head>

	<body>
		
<header class="header">
	<h1 class="site-title"><a href="/">KHTDR</a></h1>
	
<nav class="navigation">
	<ul>
		
		
		
		
	</ul>
</nav>

</header>

		
	
	<div>
		<article>
			<h2>opts.js</h2>
			
<aside>
	<div>
		
		<ul class="categories">
			
			<li><a href="https://khtdr.com/categories/software/">software</a>/</li>
			
		</ul>

		
		<ul class="tags">
			
			<li>#<a href="https://khtdr.com/tags/javascript/">javascript</a></li><li>#<a href="https://khtdr.com/tags/command-line/">command-line</a></li><li>#<a href="https://khtdr.com/tags/node-js/">node-js</a></li><li>#<a href="https://khtdr.com/tags/tools/">tools</a></li><li>#<a href="https://khtdr.com/tags/npm/">npm</a></li><li>#<a href="https://khtdr.com/tags/typescript-bindings/">typescript-bindings</a></li>
			
		</ul>
	</div>
</aside>

			<div>
<p>
<code class="verbatim">opts.js</code> is a Javascript helper library for command-line applications, for accepting  and parsing command-line arguments,flags and options, and automatically generating a useful help message.</p>
<div id="outline-container-intro" class="outline-2">
<h2 id="intro">
Introduction to Opts.js
</h2>
<div id="outline-text-intro" class="outline-text-2">
<p>
Why choose <code>opts.js</code> over something bigger and better?</p>
<ul>
<li><strong>Small :</strong> Under 10kb, <em>uncompressed</em>.</li>
<li><strong>Stable :</strong> Relatively unchanged since 2010. See <a href="https://github.com/khtdr/opts/blob/master/CHANGES.org">changelog</a>.</li>
<li><strong>Standalone :</strong> No package manager necessary, no compiling needed. See <a href="https://raw.githubusercontent.com/khtdr/opts/master/src/opts.js">src/opts.js</a>.</li>
<li><strong>Tested :</strong> <em>Millions</em> of downloads per year. See <a href="https://www.npmjs.com/package/opts">npm/opts</a>.</li>
</ul>
<div id="outline-container-example-1" class="outline-3">
<h3 id="example-1">
Quick-Start example
</h3>
<div id="outline-text-example-1" class="outline-text-3">
<p>
The following example set up a custom &#34;version&#34; function, and opts in to the automatic help message. No pun intended.</p>
<p>
<a href="https://raw.githubusercontent.com/khtdr/opts/master/examples/example1.js">opts/examples/example1.js</a></p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">opts</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;opts&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;v&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;version&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Show version and exit&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">callback</span>    <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () { <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;v1.0&#39;</span>); <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>); }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">options</span>, <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Example 1&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">0</span>);</span></span></code></pre></div>
</div>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>node ./example1</span></span></code></pre></div>
</div>
<pre class="example">
Example 1
</pre>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>node ./example1 --help</span></span></code></pre></div>
</div>
<pre class="example">
Usage: node ./example1 [options]
Show this help message
   --help
Show version and exit
   -v, --version
</pre>
<div class="src src-sh">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>node ./example1 -v</span></span></code></pre></div>
</div>
<pre class="example">
v1.0
</pre>
<div class="center-block" style="text-align: center; margin-left: auto; margin-right: auto;">
<p>See <a href="#more-examples">more examples</a> below.</p>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-setup" class="outline-2">
<h2 id="setup">
Installation
</h2>
<div id="outline-text-setup" class="outline-text-2">
<div id="outline-container-standalone" class="outline-3">
<h3 id="standalone">
No NPM dependencies are required
</h3>
<div id="outline-text-standalone" class="outline-text-3">
<p>
To use <a href="https://raw.githubusercontent.com/khtdr/opts/master/src/opts.js">opts.js</a>, you <em>do not</em> need to use NPM or any package manager. It is written in plain-old Javascript, and can be downloaded and included in your Node.js project as-is. All of <a href="https://github.com/khtdr/opts/tree/master/examples">the examples</a> use this approach.</p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd /path/to/your/project
</span></span><span style="display:flex;"><span>curl -o opts.js https://raw.githubusercontent.com/khtdr/opts/master/src/opts.js</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-npm" class="outline-3">
<h3 id="npm">
Typescript and NPM packages for convenience
</h3>
<div id="outline-text-npm" class="outline-text-3">
<p>
If you are using NPM in your project, you can install it using the name <code class="verbatim">opts</code>.</p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install opts</span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-quickstart" class="outline-2">
<h2 id="quickstart">
Basic usage and setup
</h2>
<div id="outline-text-quickstart" class="outline-text-2">
<p>
To use, import the library and call <code class="verbatim">opts.parse</code> with your configurations. The various types of configurations are covered further down.</p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">opts</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;opts&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">options</span>, <span style="color:#a6e22e">arguments</span>, <span style="color:#a6e22e">help</span>);</span></span></code></pre></div>
</div>
<div class="center-block" style="text-align: center; margin-left: auto; margin-right: auto;">
<p><em>or with the more modern syntax</em></p>
</div>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">opts</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;opts&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">options</span>, <span style="color:#a6e22e">arguments</span>, <span style="color:#a6e22e">help</span>);</span></span></code></pre></div>
</div>
<p>
If you installed <code>opts</code> with NPM, the typescript definitions should automatically be available in your editor. Otherwise you can download the <a href="https://raw.githubusercontent.com/khtdr/opts/master/src/opts.d.ts">definition (.d.ts) file here</a>.</p>
</div>
</div>
<div id="outline-container-api" class="outline-2">
<h2 id="api">
API configurations
</h2>
<div id="outline-text-api" class="outline-text-2">
<p>
<code class="verbatim">opts.parse(options, arguments, help)</code></p>
<p>
Options are flag-arguments. Arguments are everything else. Consider the following hypothetical command for starting a server that listens on <a href="http://0.0.0.0:4000">http://0.0.0.0:4000</a></p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>node ./my-app start --host 0.0.0.0 -p <span style="color:#ae81ff">4000</span></span></span></code></pre></div>
</div>
<p>
In this example, the options are <code class="verbatim">--host 0.0.0.0</code> and <code class="verbatim">-p 4000</code>. The argument is <code class="verbatim">start</code>. The arguments can be after, before, or among the options.</p>
<div id="outline-container-api-options" class="outline-3">
<h3 id="api-options">
Options
</h3>
<div id="outline-text-api-options" class="outline-text-3">
<p>
<code>options</code> is an array of option objects. Each option in the array can have the following fields. None are required, but you should at least provide a short or long name.</p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;l&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;list&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Show a list&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">value</span>       <span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>, <span style="color:#75715e">// default false
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">required</span>    <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#75715e">// default false
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">callback</span>    <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">value</span>) { ... },
</span></span><span style="display:flex;"><span>  }, <span style="color:#75715e">// ... followed by more options
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>];</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-api-arguments" class="outline-3">
<h3 id="api-arguments">
Arguments
</h3>
<div id="outline-text-api-arguments" class="outline-text-3">
<p>
<code>arguments</code> require less configuration. This is an optional argument to <code>opts.parse</code>:</p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">arguments</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">name</span>     <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;script&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">required</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#75715e">// not required by default
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">callback</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">value</span>) { ... },
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>];</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-api-help" class="outline-3">
<h3 id="api-help">
Help auto-generator
</h3>
<div id="outline-text-api-help" class="outline-text-3">
<p>
Finally, you can add an automatically generated help message by passing
a last parameter of <code class="verbatim">true</code>. This is also an optional argument to <code>opts.parse</code>.</p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">options</span>, <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">// or if you want more control, you can do:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  options.push({
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    long        : &#39;help&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    description : &#39;Show this help message&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    callback    : require(&#39;opts&#39;).help,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  opts.parse(options);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span></span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-more-examples" class="outline-2">
<h2 id="more-examples">
More examples
</h2>
<div id="outline-text-more-examples" class="outline-text-2">
<div id="outline-container-example-2" class="outline-3">
<h3 id="example-2">
Showcase of features and options
</h3>
<div id="outline-text-example-2" class="outline-text-3">
<p>
<a href="https://raw.githubusercontent.com/khtdr/opts/master/examples/example2.js">opts/examples/example2.js</a></p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * More complex example.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Run:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *   node example2.js --help
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * and play with the options to see the behavior.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * This example shows different ways of using the library. It is deliberately
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * inconsistent. Choose the style that suits you best.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">opts</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;opts&#39;</span>)
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">host</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;localhost&#39;</span>; <span style="color:#75715e">// default host value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;v&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;version&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Show version and exit&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">callback</span>    <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () { <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;v1.0&#39;</span>); <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">1</span>); }
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;l&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;list&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;List all files&#39;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;f&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;file&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Load a file&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">value</span>       <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">required</span>    <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;d&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;debug&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Set a debug level&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">value</span>       <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;h&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;host&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;The hostname to connect to&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">value</span>       <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">callback</span>    <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">value</span>) { <span style="color:#a6e22e">host</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>; } <span style="color:#75715e">// override host value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  },
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;p&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;port&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;The port to connect to&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">value</span>       <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">options</span>, <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">port</span>  <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;port&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#ae81ff">8000</span> <span style="color:#75715e">// default port value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  , <span style="color:#a6e22e">debug</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;d&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;info&#39;</span>  <span style="color:#75715e">// default debug value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  , <span style="color:#a6e22e">file</span>  <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;f&#39;</span>)
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">list</span>  <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;list&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">arg1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">args</span>()[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">arg2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">args</span>()[<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">list</span>) <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;List arg was set&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">file</span>) <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;File arg was set: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">file</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Debug level is: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">debug</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Host is: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">host</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Port is: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">port</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">arg1</span>) <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Extra arg 1: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">arg1</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">arg2</span>) <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Extra arg 2: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">arg2</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">0</span>);</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-example-3" class="outline-3">
<h3 id="example-3">
Conflict detection
</h3>
<div id="outline-text-example-3" class="outline-text-3">
<p>
<a href="https://raw.githubusercontent.com/khtdr/opts/master/examples/example3.js">opts/examples/example3.js</a></p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Simple example that is broken by design (conflicting options)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Examples:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *   $ node example3.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *   &gt; Conflicting flags: -v
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">opts</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;opts&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;v&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Show version and exit&#39;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;v&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Be verbose&#39;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">options</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Example 3&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">0</span>);</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-example-4" class="outline-3">
<h3 id="example-4">
Using named arguments and from within a library
</h3>
<div id="outline-text-example-4" class="outline-text-3">
<p>
<a href="https://raw.githubusercontent.com/khtdr/opts/master/examples/example4.js">opts/examples/example4.js</a></p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Advanced example using namespaces for a library and named arguments
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Run:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *   node example4.js --help
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * and play with the options to see the behavior.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">opts</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;opts&#39;</span>)
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">host</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;localhost&#39;</span>; <span style="color:#75715e">// default host value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Example of using some library in the same app
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">libOpts</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;l&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;list&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Show the library list&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">callback</span>    <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () { <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;mylib list!&#39;</span>); },
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">libOpts</span>, <span style="color:#e6db74">&#39;mylib&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;l&#39;</span> <span style="color:#75715e">// deliberately conflicting with &#39;mylib&#39; option
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;list&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;List all files&#39;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  { <span style="color:#66d9ef">short</span>       <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;d&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#66d9ef">long</span>        <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;debug&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">description</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Set a debug level&#39;</span>
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">value</span>       <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">arguments</span> <span style="color:#f92672">=</span> [ { <span style="color:#a6e22e">name</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;script&#39;</span> , <span style="color:#a6e22e">required</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span> }
</span></span><span style="display:flex;"><span>                , { <span style="color:#a6e22e">name</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;timeout&#39;</span> }
</span></span><span style="display:flex;"><span>                ];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">options</span>, <span style="color:#a6e22e">arguments</span>, <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">debug</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;d&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;info&#39;</span>  <span style="color:#75715e">// default debug value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  , <span style="color:#a6e22e">list</span>  <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;list&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">script</span>  <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">arg</span>(<span style="color:#e6db74">&#39;script&#39;</span>)
</span></span><span style="display:flex;"><span>  , <span style="color:#a6e22e">timeout</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">arg</span>(<span style="color:#e6db74">&#39;timeout&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#ae81ff">30</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">list</span>) <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;List arg was set&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Debug level is: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">debug</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Script is: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">script</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Timeout is: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">timeout</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">exit</span>(<span style="color:#ae81ff">0</span>);</span></span></code></pre></div>
</div>
<blockquote>
<p>You can find the source code and all examples at Github, <a href="https://github.com/khtdr/opts">github.com/khtdr/opts</a>.</p>
</blockquote>
</div>
</div>
</div>
</div>
</div>
		</article>

		
		<time datetime="2019-08-02">created_at: August 2, 2019</time>
		

		

	<div class="post-actions">
		<ul>
			
			<li><a href="..">All posts</a></li>

			
			<li><a href="../index.xml">Subscribe</a></li>
		</ul>
	</div>


	</div>

		

	</body>
</html>

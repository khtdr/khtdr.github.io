<!DOCTYPE html>
<html lang="en">
	
<head>
	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">

	
	<title>KHTDR - opts.js</title>

	
	


	
	<link rel="stylesheet" href="/css/styles.css" />
<link rel="stylesheet" href="/css/syntax-dracula.css" />


	
	


	
	</head>

	<body>
		
<header class="header">
	<h1 class="site-title"><a href="/">KHTDR</a></h1>
	
<nav class="navigation">
	<ul>
		
		
		
		
	</ul>
</nav>

</header>

		
	
	<div>
		<article>
<a href="/">home</a>/
			
			<a href="https://khtdr.com/categories/software.html">software</a>/
			
 opts.js

		
		<time datetime="2019-08-02">originally published on August 2, 2019</time>
		


			
<aside>
	<div>
		<ul class="tags">
			
			<li>#<a href="https://khtdr.com/tags/javascript.html">javascript</a></li><li>#<a href="https://khtdr.com/tags/command-line.html">command-line</a></li><li>#<a href="https://khtdr.com/tags/node-js.html">node-js</a></li><li>#<a href="https://khtdr.com/tags/tools.html">tools</a></li><li>#<a href="https://khtdr.com/tags/npm.html">npm</a></li><li>#<a href="https://khtdr.com/tags/typescript-bindings.html">typescript-bindings</a></li>
			
		</ul>
	</div>
</aside>

			<div>
<p>
<code class="verbatim">opts.js</code> is a Javascript helper library for command-line applications, for accepting and parsing command-line arguments, flags and options, and automatically generating a useful help message.</p>
<div id="outline-container-intro" class="outline-2">
<h2 id="intro">
Introduction to Opts.js
</h2>
<div id="outline-text-intro" class="outline-text-2">
<p>
Why choose <code>opts.js</code> over something bigger and better?</p>
<ul>
<li><strong>Small :</strong> Under 10kb, <em>uncompressed</em>.</li>
<li><strong>Stable :</strong> Relatively unchanged since 2010. See <a href="https://github.com/khtdr/opts/blob/master/CHANGES.org">changelog</a>.</li>
<li><strong>Standalone :</strong> No package manager necessary, no compiling needed. See <a href="https://raw.githubusercontent.com/khtdr/opts/master/src/opts.js">src/opts.js</a>.</li>
<li><strong>Tested :</strong> <em>Millions</em> of downloads per year. See <a href="https://www.npmjs.com/package/opts">npm/opts</a>.</li>
</ul>
<div id="outline-container-example-1" class="outline-3">
<h3 id="example-1">
Quick-Start example
</h3>
<div id="outline-text-example-1" class="outline-text-3">
<p>
The following example set up a custom &#34;version&#34; function, and opts in to the automatic help message. No pun intended.</p>
<p>
<a href="https://raw.githubusercontent.com/khtdr/opts/master/examples/example1.js">opts/examples/example1.js</a></p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;opts&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;v&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;version&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;Show version and exit&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">callback</span>    <span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;v1.0&#39;</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">opts</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Example 1&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span></span></span></code></pre></div>
</div>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">node ./example1</span></span></code></pre></div>
</div>
<pre class="example">
Example 1
</pre>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">node ./example1 --help</span></span></code></pre></div>
</div>
<pre class="example">
Usage: node ./example1 [options]
Show this help message
   --help
Show version and exit
   -v, --version
</pre>
<div class="src src-sh">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">node ./example1 -v</span></span></code></pre></div>
</div>
<pre class="example">
v1.0
</pre>
<div class="center-block" style="text-align: center; margin-left: auto; margin-right: auto;">
<p>See <a href="#more-examples">more examples</a> below.</p>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-setup" class="outline-2">
<h2 id="setup">
Installation
</h2>
<div id="outline-text-setup" class="outline-text-2">
<div id="outline-container-standalone" class="outline-3">
<h3 id="standalone">
No NPM dependencies are required
</h3>
<div id="outline-text-standalone" class="outline-text-3">
<p>
To use <a href="https://raw.githubusercontent.com/khtdr/opts/master/src/opts.js">opts.js</a>, you <em>do not</em> need to use NPM or any package manager. It is written in plain-old Javascript, and can be downloaded and included in your Node.js project as-is. All of <a href="https://github.com/khtdr/opts/tree/master/examples">the examples</a> use this approach.</p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> /path/to/your/project
</span></span><span class="line"><span class="cl">curl -o opts.js https://raw.githubusercontent.com/khtdr/opts/master/src/opts.js</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-npm" class="outline-3">
<h3 id="npm">
Typescript and NPM packages for convenience
</h3>
<div id="outline-text-npm" class="outline-text-3">
<p>
If you are using NPM in your project, you can install it using the name <code class="verbatim">opts</code>.</p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install opts</span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-quickstart" class="outline-2">
<h2 id="quickstart">
Basic usage and setup
</h2>
<div id="outline-text-quickstart" class="outline-text-2">
<p>
To use, import the library and call <code class="verbatim">opts.parse</code> with your configurations. The various types of configurations are covered further down.</p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;opts&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">opts</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">,</span> <span class="nx">help</span><span class="p">);</span></span></span></code></pre></div>
</div>
<div class="center-block" style="text-align: center; margin-left: auto; margin-right: auto;">
<p><em>or with the more modern syntax</em></p>
</div>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">opts</span> <span class="nx">from</span> <span class="s1">&#39;opts&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">opts</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">,</span> <span class="nx">help</span><span class="p">);</span></span></span></code></pre></div>
</div>
<p>
If you installed <code>opts</code> with NPM, the typescript definitions should automatically be available in your editor. Otherwise you can download the <a href="https://raw.githubusercontent.com/khtdr/opts/master/src/opts.d.ts">definition (.d.ts) file here</a>.</p>
</div>
</div>
<div id="outline-container-api" class="outline-2">
<h2 id="api">
API configurations
</h2>
<div id="outline-text-api" class="outline-text-2">
<p>
<code class="verbatim">opts.parse(options, arguments, help)</code></p>
<p>
Options are flag-arguments. Arguments are everything else. Consider the following hypothetical command for starting a server that listens on <a href="http://0.0.0.0:4000">http://0.0.0.0:4000</a></p>
<div class="src src-bash">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">node ./my-app start --host 0.0.0.0 -p <span class="m">4000</span></span></span></code></pre></div>
</div>
<p>
In this example, the options are <code class="verbatim">--host 0.0.0.0</code> and <code class="verbatim">-p 4000</code>. The argument is <code class="verbatim">start</code>. The arguments can be after, before, or among the options.</p>
<div id="outline-container-api-options" class="outline-3">
<h3 id="api-options">
Options
</h3>
<div id="outline-text-api-options" class="outline-text-3">
<p>
<code>options</code> is an array of option objects. Each option in the array can have the following fields. None are required, but you should at least provide a short or long name.</p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;Show a list&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">value</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// default false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">required</span>    <span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// default false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">callback</span>    <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="c1">// ... followed by more options
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">];</span></span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-api-arguments" class="outline-3">
<h3 id="api-arguments">
Arguments
</h3>
<div id="outline-text-api-arguments" class="outline-text-3">
<p>
<code>arguments</code> require less configuration. This is an optional argument to <code>opts.parse</code>:</p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">arguments</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">name</span>     <span class="o">:</span> <span class="s1">&#39;script&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// not required by default
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">callback</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span></span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-api-help" class="outline-3">
<h3 id="api-help">
Help auto-generator
</h3>
<div id="outline-text-api-help" class="outline-text-3">
<p>
Finally, you can add an automatically generated help message by passing
a last parameter of <code class="verbatim">true</code>. This is also an optional argument to <code>opts.parse</code>.</p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">opts</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// or if you want more control, you can do:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">  options.push({
</span></span></span><span class="line"><span class="cl"><span class="cm">    long        : &#39;help&#39;,
</span></span></span><span class="line"><span class="cl"><span class="cm">    description : &#39;Show this help message&#39;,
</span></span></span><span class="line"><span class="cl"><span class="cm">    callback    : require(&#39;opts&#39;).help,
</span></span></span><span class="line"><span class="cl"><span class="cm">  }
</span></span></span><span class="line"><span class="cl"><span class="cm">  opts.parse(options);
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span></span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-more-examples" class="outline-2">
<h2 id="more-examples">
More examples
</h2>
<div id="outline-text-more-examples" class="outline-text-2">
<div id="outline-container-example-2" class="outline-3">
<h3 id="example-2">
Showcase of features and options
</h3>
<div id="outline-text-example-2" class="outline-text-3">
<p>
<a href="https://raw.githubusercontent.com/khtdr/opts/master/examples/example2.js">opts/examples/example2.js</a></p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * More complex example.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Run:
</span></span></span><span class="line"><span class="cl"><span class="cm"> *   node example2.js --help
</span></span></span><span class="line"><span class="cl"><span class="cm"> * and play with the options to see the behavior.
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * This example shows different ways of using the library. It is deliberately
</span></span></span><span class="line"><span class="cl"><span class="cm"> * inconsistent. Choose the style that suits you best.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;opts&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">host</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">;</span> <span class="c1">// default host value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;v&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;version&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;Show version and exit&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">callback</span>    <span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;v1.0&#39;</span><span class="p">);</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;l&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;list&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;List all files&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;f&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;file&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;Load a file&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">value</span>       <span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">required</span>    <span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;d&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;debug&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;Set a debug level&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">value</span>       <span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;h&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;host&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;The hostname to connect to&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">value</span>       <span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">callback</span>    <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="nx">host</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// override host value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;p&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;port&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;The port to connect to&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">value</span>       <span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">opts</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">port</span>  <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;port&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="mi">8000</span> <span class="c1">// default port value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">,</span> <span class="nx">debug</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;info&#39;</span>  <span class="c1">// default debug value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">,</span> <span class="nx">file</span>  <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">list</span>  <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">arg1</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">args</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">arg2</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">args</span><span class="p">()[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;List arg was set&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;File arg was set: &#39;</span> <span class="o">+</span> <span class="nx">file</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Debug level is: &#39;</span> <span class="o">+</span> <span class="nx">debug</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Host is: &#39;</span> <span class="o">+</span> <span class="nx">host</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Port is: &#39;</span> <span class="o">+</span> <span class="nx">port</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">arg1</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Extra arg 1: &#39;</span> <span class="o">+</span> <span class="nx">arg1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">arg2</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Extra arg 2: &#39;</span> <span class="o">+</span> <span class="nx">arg2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span></span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-example-3" class="outline-3">
<h3 id="example-3">
Conflict detection
</h3>
<div id="outline-text-example-3" class="outline-text-3">
<p>
<a href="https://raw.githubusercontent.com/khtdr/opts/master/examples/example3.js">opts/examples/example3.js</a></p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Simple example that is broken by design (conflicting options)
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Examples:
</span></span></span><span class="line"><span class="cl"><span class="cm"> *   $ node example3.js
</span></span></span><span class="line"><span class="cl"><span class="cm"> *   &gt; Conflicting flags: -v
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;opts&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;v&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;Show version and exit&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;v&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;Be verbose&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">opts</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Example 3&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span></span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-example-4" class="outline-3">
<h3 id="example-4">
Using named arguments and from within a library
</h3>
<div id="outline-text-example-4" class="outline-text-3">
<p>
<a href="https://raw.githubusercontent.com/khtdr/opts/master/examples/example4.js">opts/examples/example4.js</a></p>
<div class="src src-javascript">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Advanced example using namespaces for a library and named arguments
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Run:
</span></span></span><span class="line"><span class="cl"><span class="cm"> *   node example4.js --help
</span></span></span><span class="line"><span class="cl"><span class="cm"> * and play with the options to see the behavior.
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;opts&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">host</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">;</span> <span class="c1">// default host value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Example of using some library in the same app
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">libOpts</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;l&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;list&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;Show the library list&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">callback</span>    <span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;mylib list!&#39;</span><span class="p">);</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">opts</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">libOpts</span><span class="p">,</span> <span class="s1">&#39;mylib&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;l&#39;</span> <span class="c1">// deliberately conflicting with &#39;mylib&#39; option
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;list&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;List all files&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="kr">short</span>       <span class="o">:</span> <span class="s1">&#39;d&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="kr">long</span>        <span class="o">:</span> <span class="s1">&#39;debug&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="s1">&#39;Set a debug level&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">value</span>       <span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">arguments</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{</span> <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;script&#39;</span> <span class="p">,</span> <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">,</span> <span class="p">{</span> <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;timeout&#39;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">opts</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">debug</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;info&#39;</span>  <span class="c1">// default debug value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">,</span> <span class="nx">list</span>  <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">script</span>  <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">arg</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">,</span> <span class="nx">timeout</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">arg</span><span class="p">(</span><span class="s1">&#39;timeout&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="mi">30</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;List arg was set&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Debug level is: &#39;</span> <span class="o">+</span> <span class="nx">debug</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Script is: &#39;</span> <span class="o">+</span> <span class="nx">script</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Timeout is: &#39;</span> <span class="o">+</span> <span class="nx">timeout</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span></span></span></code></pre></div>
</div>
<blockquote>
<p>You can find the source code and all examples at Github, <a href="https://github.com/khtdr/opts">github.com/khtdr/opts</a>.</p>
</blockquote>
</div>
</div>
</div>
</div>
</div>
		</article>

		

	<div class="post-actions">
		<ul>
			
			<li><a href="..">All posts</a></li>

			
			<li><a href="../index.xml">Subscribe</a></li>
		</ul>
	</div>


	</div>

		

	</body>
</html>
